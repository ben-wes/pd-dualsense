#N canvas 65 88 802 748 10;
#X msg 96 593 quat w \$1;
#X msg 153 614 quat x \$1;
#X msg 267 656 quat z \$1;
#X msg 210 635 quat y \$1;
#X text 112 115 gyro;
#X text 370 115 accel;
#X msg 134 226 1;
#X obj 137 482 +;
#X obj 193 483 +;
#X obj 323 483 +;
#X obj 99 539 quaternion/normalize;
#X obj 115 191 t b b f;
#X text 611 115 reset;
#N canvas 92 117 450 300 stop_drift 0;
#X obj 40 41 inlet;
#X obj 40 232 outlet;
#X msg 67 142 0;
#X obj 40 100 moses -0.05;
#X obj 67 121 moses 0.05;
#X connect 0 0 3 0;
#X connect 2 0 1 0;
#X connect 3 0 1 0;
#X connect 3 1 4 0;
#X connect 4 0 2 0;
#X connect 4 1 1 0;
#X restore 162 223 pd stop_drift;
#N canvas 92 117 450 300 stop_drift 0;
#X obj 40 41 inlet;
#X obj 40 232 outlet;
#X msg 67 142 0;
#X obj 40 100 moses -0.05;
#X obj 67 121 moses 0.05;
#X connect 0 0 3 0;
#X connect 2 0 1 0;
#X connect 3 0 1 0;
#X connect 3 1 4 0;
#X connect 4 0 2 0;
#X connect 4 1 1 0;
#X restore 208 198 pd stop_drift;
#N canvas 92 117 450 300 stop_drift 0;
#X obj 40 41 inlet;
#X obj 40 232 outlet;
#X msg 67 142 0;
#X obj 40 100 moses -0.05;
#X obj 67 121 moses 0.05;
#X connect 0 0 3 0;
#X connect 2 0 1 0;
#X connect 3 0 1 0;
#X connect 3 1 4 0;
#X connect 4 0 2 0;
#X connect 4 1 1 0;
#X restore 258 175 pd stop_drift;
#X obj 307 254 * 0.067;
#X obj 239 254 * -0.067;
#X obj 171 254 * -0.067;
#X obj 546 370 * 0.0018;
#X obj 429 370 * 0.0018;
#X obj 370 370 * 0.0018;
#X obj 323 462 * 0.9982;
#X obj 255 462 * 0.9982;
#X obj 193 462 * 0.9982;
#X obj 137 461 * 0.9982;
#X obj 137 384 f 1;
#X msg 620 137 1 0 0 0;
#X obj 115 93 route x y z;
#X obj 375 93 route x y z;
#X obj 115 73 route gyro accel reset;
#N canvas 150 175 618 321 quaternion_mul 0;
#X obj 57 61 inlet;
#X obj 94 61 inlet;
#X obj 131 61 inlet;
#X obj 57 204 outlet;
#X obj 144 204 outlet;
#X obj 231 204 outlet;
#X obj 318 204 outlet;
#X text 340 115 w1*w2 - x1*x2 - y1*y2 - z1*z2 \; w1*x2 + x1*w2 + y1*z2 - z1*y2 \; w1*y2 - x1*z2 + y1*w2 + z1*x2 \; w1*z2 + x1*y2 - y1*x2 + z1*w2;
#X obj 57 115 expr $f1*$f5 - $f2*$f6 - $f3*$f7 - $f4*$f8 \; $f1*$f6 + $f2*$f5 + $f3*$f8 - $f4*$f7 \; $f1*$f7 - $f2*$f8 + $f3*$f5 + $f4*$f6 \; $f1*$f8 + $f2*$f7 - $f3*$f6 + $f4*$f5, f 44;
#X obj 168 61 inlet;
#X obj 206 61 inlet;
#X obj 243 61 inlet;
#X obj 280 61 inlet;
#X obj 318 61 inlet;
#X connect 0 0 8 0;
#X connect 1 0 8 1;
#X connect 2 0 8 2;
#X connect 8 0 3 0;
#X connect 8 1 4 0;
#X connect 8 2 5 0;
#X connect 8 3 6 0;
#X connect 9 0 8 3;
#X connect 10 0 8 4;
#X connect 11 0 8 5;
#X connect 12 0 8 6;
#X connect 13 0 8 7;
#X restore 140 425 pd quaternion_mul;
#N canvas 880 305 506 495 add_acceleration_quaternion 0;
#X obj 77 59 inlet;
#X obj 127 59 inlet;
#X obj 177 59 inlet;
#X obj 108 210 + 1;
#X obj 77 160 t b f;
#X obj 77 236 f;
#X obj 77 312 outlet;
#X obj 127 312 outlet;
#X obj 177 312 outlet;
#X obj 227 312 outlet;
#X text 176 331 dummy;
#X connect 0 0 4 0;
#X connect 1 0 3 0;
#X connect 2 0 7 0;
#X connect 3 0 5 1;
#X connect 4 0 5 0;
#X connect 4 1 9 0;
#X connect 5 0 6 0;
#X restore 370 309 pd add_acceleration_quaternion;
#X text 80 384 feedback;
#X obj 117 51 inlet;
#X obj 105 678 outlet;
#X connect 0 0 35 0;
#X connect 1 0 35 0;
#X connect 2 0 35 0;
#X connect 3 0 35 0;
#X connect 6 0 31 4;
#X connect 7 0 10 0;
#X connect 8 0 10 1;
#X connect 9 0 10 3;
#X connect 10 0 26 1;
#X connect 10 0 0 0;
#X connect 10 1 1 0;
#X connect 10 1 31 1;
#X connect 10 2 3 0;
#X connect 10 2 31 2;
#X connect 10 3 2 0;
#X connect 10 3 31 3;
#X connect 11 0 26 0;
#X connect 11 1 6 0;
#X connect 11 2 13 0;
#X connect 13 0 18 0;
#X connect 14 0 17 0;
#X connect 15 0 16 0;
#X connect 16 0 31 7;
#X connect 17 0 31 6;
#X connect 18 0 31 5;
#X connect 19 0 9 1;
#X connect 20 0 8 1;
#X connect 21 0 7 1;
#X connect 22 0 9 0;
#X connect 23 0 10 2;
#X connect 24 0 8 0;
#X connect 25 0 7 0;
#X connect 26 0 31 0;
#X connect 27 0 31 0;
#X connect 28 0 11 0;
#X connect 28 1 14 0;
#X connect 28 2 15 0;
#X connect 29 0 32 0;
#X connect 29 1 32 1;
#X connect 29 2 32 2;
#X connect 30 0 28 0;
#X connect 30 1 29 0;
#X connect 30 2 27 0;
#X connect 31 0 25 0;
#X connect 31 1 24 0;
#X connect 31 2 23 0;
#X connect 31 3 22 0;
#X connect 32 0 21 0;
#X connect 32 1 20 0;
#X connect 32 3 19 0;
#X connect 34 0 30 0;
